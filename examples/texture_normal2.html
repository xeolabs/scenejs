<!DOCTYPE html>
<html lang="en">
<head>
    <title>SceneJS Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <style>
        body {
            margin: 0;
            -moz-user-select: -moz-none;
            -khtml-user-select: none;
            -webkit-user-select: none;
        }
    </style>

    <script src="../api/latest/scenejs.js"></script>
    <link href="css/styles.css" rel="stylesheet"/>

<body>

<div id="infoDark">
    <a href="http://scenejs.org">SceneJS</a> - bump mapping<br><br>
    textures from <a href="http://kay-vriend.blogspot.de/2012/11/well-preserved-chesterfield.html">http://kay-vriend.blogspot.de/</a>
</div>

<script>

    // Point SceneJS to the bundled plugins
    SceneJS.setConfigs({
        pluginPath: "../api/latest/plugins"
    });

    // Create scene
    SceneJS.createScene({
        nodes: [

            // Orbiting camera node, implemented by plugin at
            // http://scenejs.org/api/latest/plugins/node/cameras/orbit.js
            {
                type: "cameras/orbit",
                yaw: 30,
                pitch: -30,
                zoom: 4,
                zoomSensitivity: 0.1,

                nodes: [
                    {
                        type: "material",
                        color: { r: 1.0, g: 1.0, b: 1.0 },
                        specular: 0.9,

                        nodes: [

                            // The color map
                            {
                                  type: "texture",
                                src: "textures/chesterfieldColorMap.png",
                                wrapS: "repeat",
                                wrapT: "repeat",
                                applyTo: "color", // Apply to diffuse color

                                nodes: [

                                    // The specular map
                                    {
                                         type: "texture",
                                        src: "textures/chesterfieldSpecularMap.png",
                                        applyTo: "specular", // Apply to specularity

                                        nodes: [

                                            // The normal map
                                            {
                                                    type: "texture",
                                                src: "textures/chesterfieldNormalMap.png",
                                                wrapS: "repeat",
                                                wrapT: "repeat",
                                                applyTo: "normals", // Apply to geometry normal vectors

                                                nodes: [
                                                    {
                                                        type: "translate",
                                                        x: -1,
                                                        y: 14,
                                                        z:-4,
                                                        nodes: [

                                                            {
                                                                type: "geometry",
                                                                primitive: "triangles",

                                                                // Non-truncated

//                                                                normals: [-0.8167068362236023, 0.26369303464889526, 0.5132794976234436, -0.8353981375694275, 0.2632787525653839, 0.48248758912086487, 0.8347019553184509, 0.5438011288642883, -0.0869087353348732, 0.976734459400177, 0.059663672000169754, -0.20598506927490234, 0.9968228340148926, 0.011846661567687988, -0.07876503467559814, 0.9101070165634155, 0.32893550395965576, -0.25200536847114563, 0.9622452259063721, -0.06121353060007095, 0.26521146297454834, 0.7899669408798218, -0.1909322291612625, 0.5826637148857117, 0.2745473384857178, -0.19544236361980438, 0.941501796245575, 0.8576022982597351, 0.049849558621644974, -0.5118919610977173, 0.9012791514396667, 0.008787102065980434, -0.43314969539642334, 0.8118463158607483, 0.42882779240608215, -0.39624762535095215, -0.233528271317482, 0.7607293725013733, 0.6056033372879028, 0.3796484172344208, 0.8885034918785095, 0.25773754715919495, -0.7538952231407166, 0.31065794825553894, 0.5789071321487427, 0.6165605783462524, 0.7562645673751831, -0.2188994288444519, -0.8356249928474426, 0.2988404631614685, 0.4608960747718811, -0.5363589525222778, 0.11489631980657578, 0.8361326456069946, -0.8207070231437683, 0.27865296602249146, 0.49879100918769836, -0.8129263520240784, 0.2604585289955139, 0.5208761096000671, -0.8135213851928711, 0.28683310747146606, 0.5058751702308655, -0.8039700984954834, 0.2512884736061096, 0.538967490196228, -0.8207593560218811, 0.3255395293235779, 0.46944448351860046, -0.8040773272514343, 0.30680716037750244, 0.5092434287071228, -0.7821398973464966, 0.296549916267395, 0.5480102896690369, -0.23329292237758636, 0.7179393768310547, 0.6558485627174377, -0.4523659944534302, 0.504621684551239, 0.7353379130363464, 0.39804956316947937, 0.7643990516662598, 0.5071988701820374, 0.2713374197483063, 0.4806792438030243, 0.8338605761528015, 0.6548246741294861, 0.7557478547096252, 0.0070571452379226685, 0.6982811689376831, 0.6118103861808777, 0.37160634994506836, 0.8936606049537659, 0.3952160179615021, -0.21254408359527588, 0.9493778347969055, 0.273377925157547, 0.15474538505077362, 0.6325914859771729, 0.3281717002391815, 0.7015207409858704, 0.8688249588012695, 0.101247638463974, 0.4846567213535309, 0.34299856424331665, 0.008824260905385017, 0.9392943978309631, 0.7951258420944214, -0.13159914314746857, 0.5919936895370483, -0.04470432177186012, 0.12145339697599411, 0.9915899038314819, -0.547598123550415, 0.2913402318954468, 0.7843831777572632, -0.2030584216117859, -0.045088235288858414, 0.9781280159950256, 0.915972113609314, 0.31183022260665894, -0.2525012493133545, 0.9117106795310974, 0.25803589820861816, -0.31968894600868225, 0.8734722137451172, 0.44837382435798645, -0.18975615501403809, 0.8919844627380371, 0.1597762256860733, -0.4228891432285309, 0.9621269106864929, 0.05695772543549538, -0.2665852904319763, 0.9979904294013977, -0.06270654499530792, -0.009099799208343029, 0.9533358812332153, -0.10832525044679642, 0.2818090617656708, 0.9754326343536377, -0.022725505754351616, 0.21912235021591187, 0.9963523745536804, -0.07377531379461288, 0.04288366809487343, 0.945227324962616, -0.0481967031955719, -0.3228347599506378, 0.995724618434906, 0.05866298824548721, -0.07135305553674698, 0.9276356101036072, 0.0724649503827095, -0.36638903617858887, 0.8605290055274963, -0.03789103031158447, -0.507990300655365],
//                                                                positions: [1.336549997329712, -14.39087963104248, 4.014430046081543, 1.3996000289916992, -14.435210227966309, 4.140160083770752, 1.6788500547409058, -14.331689834594727, 3.751310110092163, 1.7240699529647827, -14.39972972869873, 3.932300090789795, 1.7380900382995605, -14.415209770202637, 4.009349822998047, 1.7009700536727905, -14.350339889526367, 3.854340076446533, 1.7265299558639526, -14.401169776916504, 4.102399826049805, 1.6691499948501587, -14.403519630432129, 4.203020095825195, 1.5841699838638306, -14.353440284729004, 4.260839939117432, 1.6242599487304688, -14.03612995147705, 3.763669967651367, 1.6137800216674805, -14.144829750061035, 3.7645299434661865, 1.5987800359725952, -13.9064302444458, 3.76065993309021, 1.5083999633789062, -13.786849975585938, 3.97802996635437, 1.5459200143814087, -13.798029899597168, 3.967910051345825, 1.4842000007629395, -13.827949523925781, 3.9726901054382324, 1.5237499475479126, -13.80836009979248, 3.7372899055480957, 1.4851700067520142, -14.265600204467773, 4.203189849853516, 1.5020699501037598, -14.289460182189941, 4.247270107269287, 1.43149995803833, -14.212579727172852, 4.073910236358643, 1.3330600261688232, -14.164950370788574, 3.8964600563049316, 1.5278799533843994, -14.040809631347656, 4.128009796142578, 1.4263299703598022, -13.969759941101074, 3.9439399242401123, 1.5669100284576416, -14.102849960327148, 4.238649845123291, 1.5979599952697754, -14.003439903259277, 4.22337007522583, 1.5707999467849731, -13.925020217895508, 4.137790203094482, 1.5901800394058228, -13.89148998260498, 4.14100980758667, 1.6088500022888184, -14.00037956237793, 4.237679958343506, 1.6189700365066528, -13.898730278015137, 4.131939888000488, 1.6306500434875488, -14.007060050964355, 4.240729808807373, 1.6375600099563599, -13.8377103805542, 3.9564499855041504, 1.6818100214004517, -13.934969902038574, 4.111989974975586, 1.7069599628448486, -13.929920196533203, 3.949160099029541, 1.7381999492645264, -14.00741958618164, 4.081200122833252, 1.6759599447250366, -14.041060447692871, 4.228569984436035, 1.7211300134658813, -14.104229927062988, 4.187389850616455, 1.6386499404907227, -14.183259963989258, 4.281149864196777, 1.6964800357818604, -14.240389823913574, 4.232850074768066, 1.5951999425888062, -14.137350082397461, 4.279139995574951, 1.5775599479675293, -14.1210298538208, 4.272830009460449, 1.5261600017547607, -14.311249732971191, 4.256840229034424, 1.6050100326538086, -14.245240211486816, 3.694279909133911, 1.6241899728775024, -14.23507022857666, 3.7764201164245605, 1.661180019378662, -14.304519653320312, 3.794110059738159, 1.6761800050735474, -14.264399528503418, 3.8654000759124756, 1.723870038986206, -14.307209968566895, 3.9581499099731445, 1.7399200201034546, -14.300869941711426, 4.040030002593994, 1.7263100147247314, -14.252360343933105, 4.1326398849487305, 1.7414900064468384, -14.153599739074707, 4.109600067138672, 1.7487900257110596, -14.222590446472168, 4.046820163726807, 1.7387800216674805, -14.206509590148926, 3.982490062713623, 1.7511800527572632, -14.092029571533203, 4.031610012054443, 1.7166500091552734, -14.053170204162598, 3.9145500659942627, 1.684380054473877, -14.168379783630371, 3.880460023880005],
//                                                                uv: [0.8751500248908997, 0.3463999927043915, 0.8830000162124634, 0.34654998779296875, 0.8984900116920471, 0.31692999601364136, 0.9017699956893921, 0.3270399868488312, 0.9012100100517273, 0.330949991941452, 0.9003599882125854, 0.3219499886035919, 0.8984400033950806, 0.3338499963283539, 0.894860029220581, 0.3379499912261963, 0.8899700045585632, 0.33981001377105713, 0.8851199746131897, 0.3158000111579895, 0.8891199827194214, 0.31527000665664673, 0.8803799748420715, 0.31773000955581665, 0.8771799802780151, 0.3265399932861328, 0.878030002117157, 0.32583001255989075, 0.8762900233268738, 0.32739999890327454, 0.8757799863815308, 0.31878000497817993, 0.8839499950408936, 0.3406499922275543, 0.8857700228691101, 0.3405199944972992, 0.87677001953125, 0.3399200141429901, 0.8683199882507324, 0.3363800048828125, 0.8795999884605408, 0.3350200057029724, 0.8725100159645081, 0.33125001192092896, 0.884440004825592, 0.33577001094818115, 0.8835499882698059, 0.33324000239372253, 0.8811399936676025, 0.33118000626564026, 0.8815900087356567, 0.3303300142288208, 0.884119987487793, 0.33302000164985657, 0.8821700215339661, 0.32973000407218933, 0.884660005569458, 0.33278998732566833, 0.8812299966812134, 0.3240300118923187, 0.8844799995422363, 0.32811999320983887, 0.8850600123405457, 0.3230400085449219, 0.8876000046730042, 0.3269299864768982, 0.8864099979400635, 0.3319999873638153, 0.8894500136375427, 0.3309299945831299, 0.8885400295257568, 0.335640013217926, 0.8918899893760681, 0.3344700038433075, 0.8863300085067749, 0.33586999773979187, 0.8856099843978882, 0.33588001132011414, 0.8867999911308289, 0.34053999185562134, 0.8916400074958801, 0.31299999356269836, 0.8932499885559082, 0.3160800039768219, 0.8971999883651733, 0.3181999921798706, 0.8963000178337097, 0.3205299973487854, 0.8984299898147583, 0.3257499933242798, 0.8972600102424622, 0.32892999053001404, 0.8941199779510498, 0.33118999004364014, 0.8918799757957458, 0.32879000902175903, 0.8948000073432922, 0.3277199864387512, 0.8948299884796143, 0.32506000995635986, 0.8905699849128723, 0.3256700038909912, 0.8889399766921997, 0.32148000597953796, 0.892549991607666, 0.3202899992465973],

                                                                // Truncated:

                                                                "normals": [-0.8169999718666077, 0.2639999985694885, 0.5130000114440918, -0.8349999785423279, 0.2630000114440918, 0.4819999933242798, 0.8349999785423279, 0.5440000295639038, -0.08699999749660492, 0.9769999980926514, 0.05999999865889549, -0.20600000023841858, 0.996999979019165, 0.012000000104308128, -0.07900000363588333, 0.9100000262260437, 0.32899999618530273, -0.25200000405311584, 0.9620000123977661, -0.061000000685453415, 0.26499998569488525, 0.7900000214576721, -0.19099999964237213, 0.5830000042915344, 0.2750000059604645, -0.19499999284744263, 0.9419999718666077, 0.8579999804496765, 0.05000000074505806, -0.5120000243186951, 0.9010000228881836, 0.008999999612569809, -0.43299999833106995, 0.8119999766349792, 0.42899999022483826, -0.3959999978542328, -0.23399999737739563, 0.7609999775886536, 0.6060000061988831, 0.3799999952316284, 0.8889999985694885, 0.257999986410141, -0.7540000081062317, 0.3109999895095825, 0.5789999961853027, 0.6169999837875366, 0.7559999823570251, -0.21899999678134918, -0.8360000252723694, 0.29899999499320984, 0.460999995470047, -0.5360000133514404, 0.11500000208616257, 0.8360000252723694, -0.8209999799728394, 0.27900001406669617, 0.49900001287460327, -0.8130000233650208, 0.25999999046325684, 0.5210000276565552, -0.8140000104904175, 0.28700000047683716, 0.5059999823570251, -0.8040000200271606, 0.25099998712539673, 0.5389999747276306, -0.8209999799728394, 0.32600000500679016, 0.4690000116825104, -0.8040000200271606, 0.3070000112056732, 0.5090000033378601, -0.7820000052452087, 0.296999990940094, 0.5479999780654907, -0.2329999953508377, 0.7179999947547913, 0.656000018119812, -0.4519999921321869, 0.5049999952316284, 0.7350000143051147, 0.39800000190734863, 0.7639999985694885, 0.5070000290870667, 0.2709999978542328, 0.48100000619888306, 0.8339999914169312, 0.6549999713897705, 0.7559999823570251, 0.007000000216066837, 0.6980000138282776, 0.6119999885559082, 0.3720000088214874, 0.8939999938011169, 0.39500001072883606, -0.21299999952316284, 0.9490000009536743, 0.27300000190734863, 0.1550000011920929, 0.6330000162124634, 0.328000009059906, 0.7020000219345093, 0.8690000176429749, 0.10100000351667404, 0.48500001430511475, 0.34299999475479126, 0.008999999612569809, 0.9390000104904175, 0.7950000166893005, -0.13199999928474426, 0.5920000076293945, -0.04500000178813934, 0.12099999934434891, 0.9919999837875366, -0.5479999780654907, 0.29100000858306885, 0.7839999794960022, -0.2029999941587448, -0.04500000178813934, 0.9779999852180481, 0.9160000085830688, 0.31200000643730164, -0.2529999911785126, 0.9120000004768372, 0.257999986410141, -0.3199999928474426, 0.8730000257492065, 0.4480000138282776, -0.1899999976158142, 0.8920000195503235, 0.1599999964237213, -0.4230000078678131, 0.9620000123977661, 0.05700000002980232, -0.2669999897480011, 0.9980000257492065, -0.06300000101327896, -0.008999999612569809, 0.953000009059906, -0.1080000028014183, 0.28200000524520874, 0.9750000238418579, -0.023000000044703484, 0.21899999678134918, 0.9959999918937683, -0.07400000095367432, 0.0430000014603138, 0.9449999928474426, -0.04800000041723251, -0.3230000138282776, 0.9959999918937683, 0.05900000035762787, -0.07100000232458115, 0.9279999732971191, 0.07199999690055847, -0.3659999966621399, 0.8610000014305115, -0.03799999877810478, -0.5080000162124634],
                                                                "positions": [1.3370000123977661, -14.390999794006348, 4.013999938964844, 1.399999976158142, -14.4350004196167, 4.139999866485596, 1.6790000200271606, -14.331999778747559, 3.750999927520752, 1.7239999771118164, -14.399999618530273, 3.931999921798706, 1.7380000352859497, -14.414999961853027, 4.008999824523926, 1.7009999752044678, -14.350000381469727, 3.8540000915527344, 1.7269999980926514, -14.401000022888184, 4.1020002365112305, 1.6690000295639038, -14.404000282287598, 4.203000068664551, 1.5839999914169312, -14.352999687194824, 4.261000156402588, 1.6239999532699585, -14.03600025177002, 3.7639999389648438, 1.6139999628067017, -14.145000457763672, 3.765000104904175, 1.5989999771118164, -13.906000137329102, 3.760999917984009, 1.5080000162124634, -13.786999702453613, 3.9779999256134033, 1.5460000038146973, -13.79800033569336, 3.9679999351501465, 1.4839999675750732, -13.82800006866455, 3.9730000495910645, 1.5240000486373901, -13.807999610900879, 3.736999988555908, 1.4850000143051147, -14.265999794006348, 4.203000068664551, 1.5019999742507935, -14.288999557495117, 4.247000217437744, 1.430999994277954, -14.213000297546387, 4.073999881744385, 1.3329999446868896, -14.164999961853027, 3.8959999084472656, 1.527999997138977, -14.041000366210938, 4.127999782562256, 1.4259999990463257, -13.970000267028809, 3.944000005722046, 1.5670000314712524, -14.102999687194824, 4.238999843597412, 1.5980000495910645, -14.003000259399414, 4.2230000495910645, 1.5709999799728394, -13.925000190734863, 4.138000011444092, 1.590000033378601, -13.890999794006348, 4.140999794006348, 1.6089999675750732, -14.0, 4.23799991607666, 1.61899995803833, -13.89900016784668, 4.131999969482422, 1.63100004196167, -14.006999969482422, 4.241000175476074, 1.6380000114440918, -13.838000297546387, 3.9560000896453857, 1.6820000410079956, -13.9350004196167, 4.111999988555908, 1.7070000171661377, -13.930000305175781, 3.9489998817443848, 1.7380000352859497, -14.006999969482422, 4.080999851226807, 1.6759999990463257, -14.041000366210938, 4.229000091552734, 1.7209999561309814, -14.104000091552734, 4.186999797821045, 1.6390000581741333, -14.182999610900879, 4.281000137329102, 1.6959999799728394, -14.239999771118164, 4.232999801635742, 1.5950000286102295, -14.13700008392334, 4.2789998054504395, 1.5779999494552612, -14.121000289916992, 4.2729997634887695, 1.5260000228881836, -14.310999870300293, 4.256999969482422, 1.6050000190734863, -14.244999885559082, 3.694000005722046, 1.6239999532699585, -14.234999656677246, 3.7760000228881836, 1.6610000133514404, -14.305000305175781, 3.7939999103546143, 1.6759999990463257, -14.263999938964844, 3.865000009536743, 1.7239999771118164, -14.307000160217285, 3.9579999446868896, 1.7400000095367432, -14.300999641418457, 4.039999961853027, 1.7259999513626099, -14.251999855041504, 4.132999897003174, 1.7410000562667847, -14.154000282287598, 4.110000133514404, 1.7489999532699585, -14.222999572753906, 4.046999931335449, 1.7389999628067017, -14.206999778747559, 3.9820001125335693, 1.7510000467300415, -14.092000007629395, 4.0320000648498535, 1.7170000076293945, -14.053000450134277, 3.9149999618530273, 1.684000015258789, -14.168000221252441, 3.880000114440918],
                                                                "uv": [0.875, 0.34599998593330383, 0.8830000162124634, 0.34700000286102295, 0.8980000019073486, 0.31700000166893005, 0.9020000100135803, 0.3269999921321869, 0.9010000228881836, 0.3310000002384186, 0.8999999761581421, 0.32199999690055847, 0.8980000019073486, 0.33399999141693115, 0.8949999809265137, 0.33799999952316284, 0.8899999856948853, 0.3400000035762787, 0.8849999904632568, 0.3160000145435333, 0.8889999985694885, 0.3149999976158142, 0.8799999952316284, 0.3179999887943268, 0.8769999742507935, 0.3269999921321869, 0.878000020980835, 0.32600000500679016, 0.8759999871253967, 0.3269999921321869, 0.8759999871253967, 0.3190000057220459, 0.8840000033378601, 0.3409999907016754, 0.8859999775886536, 0.3409999907016754, 0.8769999742507935, 0.3400000035762787, 0.8679999709129333, 0.335999995470047, 0.8799999952316284, 0.33500000834465027, 0.8730000257492065, 0.3310000002384186, 0.8840000033378601, 0.335999995470047, 0.8840000033378601, 0.3330000042915344, 0.8809999823570251, 0.3310000002384186, 0.8820000290870667, 0.33000001311302185, 0.8840000033378601, 0.3330000042915344, 0.8820000290870667, 0.33000001311302185, 0.8849999904632568, 0.3330000042915344, 0.8809999823570251, 0.3240000009536743, 0.8840000033378601, 0.328000009059906, 0.8849999904632568, 0.3230000138282776, 0.8880000114440918, 0.3269999921321869, 0.8859999775886536, 0.3319999873638153, 0.8889999985694885, 0.3310000002384186, 0.8889999985694885, 0.335999995470047, 0.8920000195503235, 0.33399999141693115, 0.8859999775886536, 0.335999995470047, 0.8859999775886536, 0.335999995470047, 0.8870000243186951, 0.3409999907016754, 0.8920000195503235, 0.31299999356269836, 0.8930000066757202, 0.3160000145435333, 0.8970000147819519, 0.3179999887943268, 0.8960000276565552, 0.32100000977516174, 0.8980000019073486, 0.32600000500679016, 0.8970000147819519, 0.32899999618530273, 0.8939999938011169, 0.3310000002384186, 0.8920000195503235, 0.32899999618530273, 0.8949999809265137, 0.328000009059906, 0.8949999809265137, 0.32499998807907104, 0.890999972820282, 0.32600000500679016, 0.8889999985694885, 0.32100000977516174, 0.8930000066757202, 0.3199999928474426],

                                                                indices: [16, 18, 1, 1, 18, 0, 18, 19, 0, 20, 21, 18, 18, 21, 19, 16, 22, 18, 18, 22, 20, 22, 23, 20, 20, 23, 24, 25, 24, 26, 26, 24, 23, 25, 26, 27, 27, 26, 28, 13, 27, 29, 29, 27, 30, 15, 29, 11, 11, 29, 31, 32, 31, 30, 30, 31, 29, 15, 13, 29, 33, 30, 28, 28, 30, 27, 30, 33, 32, 32, 33, 34, 33, 35, 34, 34, 35, 36, 28, 37, 33, 33, 37, 35, 12, 25, 13, 13, 25, 27, 37, 28, 38, 38, 28, 26, 38, 26, 22, 22, 26, 23, 38, 17, 37, 37, 17, 39, 17, 38, 16, 16, 38, 22, 24, 25, 14, 14, 25, 12, 14, 21, 24, 24, 21, 20, 40, 41, 2, 2, 41, 42, 41, 43, 42, 42, 43, 5, 3, 5, 44, 44, 5, 43, 3, 44, 4, 4, 44, 45, 4, 45, 6, 6, 45, 46, 6, 46, 7, 7, 46, 36, 34, 36, 47, 47, 36, 46, 45, 48, 46, 46, 48, 47, 49, 50, 48, 48, 50, 47, 50, 49, 51, 51, 49, 52, 50, 51, 32, 32, 51, 31, 11, 31, 9, 9, 31, 51, 10, 9, 52, 52, 9, 51, 44, 43, 49, 49, 43, 52, 48, 45, 49, 49, 45, 44, 50, 32, 47, 47, 32, 34, 43, 41, 52, 52, 41, 10, 42, 5, 2, 41, 40, 10, 7, 36, 8, 8, 36, 35, 37, 39, 35, 35, 39, 8]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    });

</script>
</body>
</html>