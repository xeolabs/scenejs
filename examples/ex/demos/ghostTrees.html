<!DOCTYPE html>
<html lang="en">
<head>
    <title>SceneJS Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <style>
        body {
            background: white;
            margin: 0;
            -moz-user-select: -moz-none;
            -khtml-user-select: none;
            -webkit-user-select: none;
        }
    </style>
</head>
<body>

<script src="../../../api/latest/scenejs.js"></script>

<script>

    // Quick-and-dirty fun demo that borrows the procedural tree generation
    // code from the "Ghost Trees" Chrome Experiment by Marek Kapolka:
    // http://www.chromeexperiments.com/detail/ghost-trees/
    //
    // Tree generation code is wrapped in a custom SceneJS node type defined in:
    // http://scenejs.org/api/latest/plugins/node/objects/trees/ghostTree.js
    //
    // All the parameters for the tree generator are exposed as configurations
    // for the node type.
    //
    // We then we instantiate the node a few times in the scene to create a
    // few trees, varying the parameters for each instance.
    //

    // Point SceneJS to the bundled plugins
    SceneJS.setConfigs({
        pluginPath:"../../../api/latest/plugins"
    });

    var scene = SceneJS.createScene({
        nodes:[

            // Override default lights, creating a single ambient light
            {
                type:"lights",
                lights:[
                    {
                        mode:"ambient",
                        color:{ r:0.4, g:0.4, b:0.4 }
                    }
                ],
                nodes:[

                    // Mouse-orbited camera, implemented by plugin at
                    // http://scenejs.org/api/latest/plugins/node/cameras/orbit.js
                    {
                        type:"cameras/orbit",
                        yaw:-130,
                        pitch:-30,
                        zoom:70,
                        zoomSensitivity:10.0,

                        nodes:[

                            // Procedurally-generated tree nodes, implemented by plugin at:
                            // http://scenejs.org/api/latest/plugins/node/objects/trees/ghostTree.js
                            //
                            // This plugin integrates the Ghost Trees generator from the Chrome Experiment
                            // by Marek Kapolka: http://www.chromeexperiments.com/detail/ghost-trees/
                            //

                            {
                                type:"translate",

                                x:-10,
                                z:-10,

                                nodes:[
                                    {
                                        type:"objects/plants/ghostTree",
                                        minSegmentLength:1,
                                        maxSegmentLength:3,
                                        minSegmentAngle:Math.PI / 16,
                                        maxSegmentAngle:Math.PI / 8,
                                        minNumBranches:1,
                                        maxNumBranches:4,
                                        segments:9,
                                        branchLengthFactor:2,
                                        branchAngleFactor:1.5,
                                        branchSegmentFactor:1,
                                        branchBranchFactor:.5
                                    }
                                ]
                            },
                            {
                                type:"translate",

                                x:+10,
                                z:-10,

                                nodes:[
                                    {
                                        type:"objects/plants/ghostTree",
                                        minSegmentLength:1,
                                        maxSegmentLength:2,
                                        minSegmentAngle:Math.PI / 16,
                                        maxSegmentAngle:Math.PI / 8,
                                        minNumBranches:1,
                                        maxNumBranches:4,
                                        segments:9,
                                        branchLengthFactor:2,
                                        branchAngleFactor:1.5,
                                        branchSegmentFactor:1,
                                        branchBranchFactor:.5
                                    }
                                ]
                            },
                            {
                                type:"translate",

                                x:+10,
                                z:+10,

                                nodes:[
                                    {
                                        type:"objects/plants/ghostTree",
                                        minSegmentLength:1,
                                        maxSegmentLength:2,
                                        minSegmentAngle:Math.PI / 16,
                                        maxSegmentAngle:Math.PI / 8,
                                        minNumBranches:1,
                                        maxNumBranches:4,
                                        segments:9,
                                        branchLengthFactor:2,
                                        branchAngleFactor:1.5,
                                        branchSegmentFactor:1,
                                        branchBranchFactor:.5
                                    }
                                ]
                            },
                            {
                                type:"translate",

                                x:-10,
                                z:+10,

                                nodes:[
                                    {
                                        type:"objects/plants/ghostTree",
                                        minSegmentLength:1,
                                        maxSegmentLength:2,
                                        minSegmentAngle:Math.PI / 16,
                                        maxSegmentAngle:Math.PI / 8,
                                        minNumBranches:1,
                                        maxNumBranches:4,
                                        segments:9,
                                        branchLengthFactor:2,
                                        branchAngleFactor:1.5,
                                        branchSegmentFactor:1,
                                        branchBranchFactor:.5
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    });

</script>
</body>
</html>